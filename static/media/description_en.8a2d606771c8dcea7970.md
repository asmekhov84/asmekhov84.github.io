Previously, I wrote about the working principles and purpose of the [profile sensor](/professional-projects?id=10) (2D laser scanner). In order to take all advantages of this scanner, it's often attaching to flange of an industrial robot. It allows to use the 2D scanner as a 3D sensor, as long as movements of the robot and profiles capturing are synchronized. However, it's necessary to calibrate the scanner relative to the robot's flange in order to find transformation from coordinate system of the scanner to coordinate system of the flange. This procedure is called extrinsic calibration. The purpose of this work was to create an algorithm that would allow to perform such calibration automatically.

There are various ways to perform extrinsic calibration. All of them often use a certain calibration object with known geometry. In this work sphere of a known radius (billiard ball) was used for the calibration.

Essence of the implemented algorithm is automated collection of profiles of the calibration sphere at various positions of the robot's flange and calculation a matrix transform that would minimize deviation of the obtained profiles from surface of the sphere. I've developed a two-stage method for computing this transformation. At the first stage, the profiles are collecting with a fixed orientation of the scanner. This allows to calculate three angles (roll, pitch, yaw), which are determining rotation matrix of the scanner. At the second stage, profiles are collecting with various orientations of the scanner. This allows, using the angles found at the previous stage, calculate offset (x, y, z) of the scanner.

On the animation below you can see an automated process of collecting profiles of the calibration sphere (2-nd stage). The [Wenglor MLSL 123](https://www.wenglor.com/en/2D3D-Sensors/2D3D-Profile-Sensors/2D3D-Profile-Sensor/p/MLSL123) industrial scanner was used to obtain the profiles. The animations also show the process of numerical optimization in order to find the solution, minimizing deviation of the profiles from surface of the calibration sphere.
